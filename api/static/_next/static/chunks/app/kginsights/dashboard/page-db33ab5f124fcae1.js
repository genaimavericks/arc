(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{7947:(e,t,a)=>{Promise.resolve().then(a.bind(a,5827))},5827:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>O});var r=a(5155),s=a(4110),n=a(425),i=a(1738),l=a(3638),o=a(3473),d=a(853),c=a(1773),m=a(2598),u=a(4081),h=a(2060),p=a(2115),x=a(5739),f=a(5472),g=a(3726),b=a(4085),y=a(5007),j=a(9602),N=a(9134),v=a(6046),w=a(7837),k=a(2079),S=a(3392);function A(e){let{isOpen:t,onClose:a,datasetId:s,datasetName:n}=e,[i,l]=(0,p.useState)(!0),[o,d]=(0,p.useState)(null),[m,u]=(0,p.useState)(null);(0,p.useEffect)(()=>{t&&h()},[t,s]);let h=async()=>{try{l(!0),u(null);let e=await fetch("/api/datapuur/ingestion-preview/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch preview data: ".concat(e.status));let t=await e.json();d(t)}catch(e){console.error("Error fetching preview data:",e),u("Failed to load preview data. Please try again.")}finally{l(!1)}};return(0,r.jsx)(w.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(w.Cf,{className:"sm:max-w-4xl",children:[(0,r.jsx)(w.c7,{children:(0,r.jsxs)(w.L3,{children:["Preview: ",n]})}),i?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):m?(0,r.jsx)("div",{className:"text-center text-red-500 py-4",children:m}):(()=>{if(!o)return(0,r.jsx)("div",{className:"text-center py-4",children:"No preview data available"});if(o.headers&&o.data)return(0,r.jsx)(S.F,{className:"h-[400px]",children:(0,r.jsxs)(k.XI,{children:[(0,r.jsx)(k.A0,{children:(0,r.jsx)(k.Hj,{children:o.headers.map((e,t)=>(0,r.jsx)(k.nd,{children:e},t))})}),(0,r.jsx)(k.BF,{children:o.data.map((e,t)=>(0,r.jsx)(k.Hj,{children:e.map((e,t)=>(0,r.jsx)(k.nA,{children:null!=e?e.toString():""},t))},t))})]})});if(!(o.data&&Array.isArray(o.data)))return(0,r.jsx)("div",{className:"text-center py-4",children:"Preview data is in an unsupported format"});{let e=o.data.length>0?Object.keys(o.data[0]):[];return(0,r.jsx)(S.F,{className:"h-[400px]",children:(0,r.jsxs)(k.XI,{children:[(0,r.jsx)(k.A0,{children:(0,r.jsx)(k.Hj,{children:e.map((e,t)=>(0,r.jsx)(k.nd,{children:e},t))})}),(0,r.jsx)(k.BF,{children:o.data.map((t,a)=>(0,r.jsx)(k.Hj,{children:e.map((e,a)=>(0,r.jsx)(k.nA,{children:null!==t[e]&&void 0!==t[e]?t[e].toString():""},a))},a))})]})})}})()]})})}var C=a(9286);function E(e){let{isOpen:t,onClose:a,datasetId:s,datasetName:n}=e,[i,l]=(0,p.useState)(!0),[o,d]=(0,p.useState)([]),[m,u]=(0,p.useState)(null);(0,p.useEffect)(()=>{t&&h()},[t,s]);let h=async()=>{try{l(!0),u(null);let e=await fetch("/api/datapuur/ingestion-schema/".concat(s),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch schema data: ".concat(e.status));let t=await e.json();t&&t.fields?d(t.fields||[]):t&&t.schema&&t.schema.fields?d(t.schema.fields||[]):d([])}catch(e){console.error("Error fetching schema data:",e),u("Failed to load schema data. Please try again.")}finally{l(!1)}},x=e=>{switch(e.toLowerCase()){case"string":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"integer":case"number":case"float":case"double":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"boolean":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"date":case"datetime":case"timestamp":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}};return(0,r.jsx)(w.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(w.Cf,{className:"sm:max-w-2xl",children:[(0,r.jsx)(w.c7,{children:(0,r.jsxs)(w.L3,{children:["Schema: ",n]})}),i?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):m?(0,r.jsx)("div",{className:"text-center text-red-500 py-4",children:m}):0===o.length?(0,r.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No schema information available"}):(0,r.jsx)(S.F,{className:"h-[400px] pr-4",children:(0,r.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,r.jsx)(y.Zp,{className:"border border-border",children:(0,r.jsx)(y.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-foreground",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(C.E,{className:x(e.type),children:e.type}),e.nullable&&(0,r.jsx)(C.E,{variant:"outline",children:"Nullable"})]})]})})},t))})})]})})}var _=a(2336),T=a(5785);let I=p.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,j.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});I.displayName="Textarea";var F=a(4505);function R(e){let{isOpen:t,onClose:a,datasetId:s,datasetName:n}=e,[i,l]=(0,p.useState)(""),[o,d]=(0,p.useState)(""),[c,m]=(0,p.useState)(!1),{toast:u}=(0,N.dj)(),h=async e=>{if(e.preventDefault(),!i.trim()){u({title:"Error",description:"Knowledge Graph name is required",variant:"destructive"});return}try{m(!0);let e=await fetch("/api/kginsights/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({dataset_id:s,name:i,description:o})});if(!e.ok)throw Error("Failed to generate knowledge graph: ".concat(e.status));let t=await e.json();u({title:"Success",description:'Knowledge Graph "'.concat(i,'" is being generated. Job ID: ').concat(t.job_id)}),l(""),d(""),a()}catch(e){console.error("Error generating knowledge graph:",e),u({title:"Error",description:"Failed to generate knowledge graph. Please try again.",variant:"destructive"})}finally{m(!1)}};return(0,r.jsx)(w.lG,{open:t,onOpenChange:e=>!e&&a(),children:(0,r.jsxs)(w.Cf,{className:"sm:max-w-md",children:[(0,r.jsx)(w.c7,{children:(0,r.jsx)(w.L3,{children:"Generate Knowledge Graph"})}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(T.J,{htmlFor:"dataset",children:"Source Dataset"}),(0,r.jsx)(_.p,{id:"dataset",value:n,disabled:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(T.J,{htmlFor:"kg-name",children:"Knowledge Graph Name"}),(0,r.jsx)(_.p,{id:"kg-name",value:i,onChange:e=>l(e.target.value),placeholder:"Enter a name for your knowledge graph",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(T.J,{htmlFor:"kg-description",children:"Description (Optional)"}),(0,r.jsx)(I,{id:"kg-description",value:o,onChange:e=>d(e.target.value),placeholder:"Enter a description for your knowledge graph",rows:3})]}),(0,r.jsxs)(w.Es,{className:"pt-4",children:[(0,r.jsx)(b.Button,{type:"button",variant:"outline",onClick:a,disabled:c,children:"Cancel"}),(0,r.jsx)(b.Button,{type:"submit",disabled:c,children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(F.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):"Generate Knowledge Graph"})]})]})]})})}function O(){return(0,r.jsx)(g.A,{requiredPermission:"kginsights:read",children:(0,r.jsx)(D,{})})}function D(){let[e,t]=(0,p.useState)([{id:"1",name:"Customer Relations",description:"Customer-product relationships",created:"2025-03-05"},{id:"2",name:"Supply Chain",description:"Supply chain network",created:"2025-02-20"}]),[a,g]=(0,p.useState)([]),[w,k]=(0,p.useState)(!0),[S,C]=(0,p.useState)(!0),[_,T]=(0,p.useState)(null),[I,F]=(0,p.useState)(null),{toast:O}=(0,N.dj)(),D=(0,v.useRouter)(),[P,B]=(0,p.useState)(!1),[G,z]=(0,p.useState)(!1),[K,M]=(0,p.useState)(!1),[L,H]=(0,p.useState)(null),J=async()=>{k(!0);try{let e=await fetch("/api/datapuur/ingestion-history",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch ingestion history: ".concat(e.status));let t=(await e.json()).items.filter(e=>"completed"===e.status).map(e=>({id:e.id,name:e.filename,type:e.type,status:e.status}));g(t),F(null)}catch(e){console.error("Error fetching ingestion history:",e),F("Failed to load available datasets. Using fallback data."),g([{id:"1",name:"Sales Q1",type:"csv",status:"completed"},{id:"2",name:"HR Data",type:"csv",status:"completed"}]),O({title:"Error",description:"Failed to load available datasets. Using fallback data.",variant:"destructive"})}finally{k(!1)}},U=async()=>{try{let e=await fetch("/api/kginsights/graphs",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch knowledge graphs: ".concat(e.status));let a=await e.json();a&&Array.isArray(a.graphs)&&t(a.graphs.map(e=>({id:e.id,name:e.name,description:e.description||"",created:e.created_at||"N/A"})))}catch(e){console.error("Error fetching knowledge graphs:",e)}};(0,p.useEffect)(()=>{(async()=>{try{C(!0);let e=await (0,x.iI)();console.log("Successfully fetched KGraph dashboard data:",e),await U(),await J(),T(null)}catch(e){console.error("Error fetching KGraph dashboard data:",e),T("Failed to load KGraph dashboard data. Using fallback data.")}finally{C(!1)}})()},[]);let V=(e,t)=>{H({id:e,name:t}),B(!0)},Z=(e,t)=>{H({id:e,name:t}),z(!0)},W=(e,t)=>{H({id:e,name:t}),M(!0)},X=e=>{D.push("/kginsights/manage/".concat(e))},Y=e=>{D.push("/kginsights/insights/".concat(e))},q={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return S?(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(n.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(s.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,r.jsx)(f.A,{})})]})]})]}):(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(n.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(s.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("div",{className:"flex-1 p-8",children:[_&&(0,r.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-500 text-yellow-700 dark:text-yellow-200 px-4 py-2 rounded-md mb-4",children:(0,r.jsxs)("p",{children:[_," - Using demo data instead."]})}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)(l.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-foreground mb-6",children:"KGraph Dashboard"}),(0,r.jsxs)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"flex flex-wrap gap-4 mb-8",children:[(0,r.jsxs)(b.Button,{className:"bg-primary hover:bg-primary/90 text-primary-foreground flex items-center gap-2",size:"lg",onClick:()=>{D.push("/kginsights/create")},children:[(0,r.jsx)(o.A,{className:"w-5 h-5"}),"New Knowledge Graph"]}),(0,r.jsxs)(b.Button,{variant:"outline",className:"border-primary/30 text-foreground flex items-center gap-2",size:"lg",onClick:()=>{D.push("/kginsights/search")},children:[(0,r.jsx)(d.A,{className:"w-5 h-5"}),"Search Graphs..."]})]}),(0,r.jsxs)(l.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-8",children:[(0,r.jsx)(l.P.div,{variants:q,children:(0,r.jsx)(y.Zp,{className:"bg-card/80 backdrop-blur-sm border border-border",children:(0,r.jsxs)(y.Wu,{className:"p-0",children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("h2",{className:"text-2xl font-semibold text-foreground mb-4",children:"Knowledge Graphs"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-t border-b border-border",children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Description"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Created"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:e.map((t,a)=>(0,r.jsxs)(l.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2+.1*a},className:(0,j.cn)("border-b border-border hover:bg-accent/30 transition-colors",a===e.length-1&&"border-b-0"),children:[(0,r.jsx)("td",{className:"px-6 py-4 text-foreground font-medium",children:t.name}),(0,r.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:t.description}),(0,r.jsx)("td",{className:"px-6 py-4 text-muted-foreground",children:t.created}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(b.Button,{variant:"link",className:"text-primary hover:text-primary/80 p-0 h-auto",onClick:()=>X(t.id),children:"Manage Schema"}),(0,r.jsx)("span",{className:"text-muted-foreground",children:"|"}),(0,r.jsx)(b.Button,{variant:"link",className:"text-primary hover:text-primary/80 p-0 h-auto",onClick:()=>Y(t.id),children:"Insights"})]})})]},t.id))})]})})]})})}),(0,r.jsx)(l.P.div,{variants:q,children:(0,r.jsx)(y.Zp,{className:"bg-card/80 backdrop-blur-sm border border-border mt-8",children:(0,r.jsxs)(y.Wu,{className:"p-0",children:[(0,r.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-foreground",children:"Available Datasets for KG Generation"}),(0,r.jsx)(b.Button,{variant:"outline",size:"icon",onClick:J,disabled:w,title:"Refresh datasets",children:(0,r.jsx)(c.A,{className:"w-4 h-4 ".concat(w?"animate-spin":"")})})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:w?(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)(f.A,{})}):a.length>0?(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-t border-b border-border",children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Dataset"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Preview"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Schema"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-foreground font-medium",children:"Generate KG"})]})}),(0,r.jsx)("tbody",{children:a.map((e,t)=>(0,r.jsxs)(l.P.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4+.1*t},className:(0,j.cn)("border-b border-border hover:bg-accent/30 transition-colors",t===a.length-1&&"border-b-0"),children:[(0,r.jsx)("td",{className:"px-6 py-4 text-foreground font-medium",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:e.name}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground capitalize",children:e.type})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(b.Button,{variant:"ghost",size:"icon",className:"text-amber-500 hover:text-amber-600 hover:bg-amber-500/10",onClick:()=>V(e.id,e.name),children:(0,r.jsx)(m.A,{className:"w-5 h-5"})})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(b.Button,{variant:"ghost",size:"icon",className:"text-orange-500 hover:text-orange-600 hover:bg-orange-500/10",onClick:()=>Z(e.id,e.name),children:(0,r.jsx)(u.A,{className:"w-5 h-5"})})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(b.Button,{variant:"ghost",size:"icon",className:"text-primary hover:text-primary/80 hover:bg-primary/10",onClick:()=>W(e.id,e.name),children:(0,r.jsx)(h.A,{className:"w-5 h-5"})})})]},e.id))})]}):(0,r.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,r.jsx)("p",{children:"No available datasets found. Please ingest data first."}),(0,r.jsx)(b.Button,{variant:"link",className:"mt-2",onClick:()=>window.location.href="/datapuur/ingestion",children:"Go to Data Ingestion"})]})})]})})})]})]})]})]})]}),L&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A,{isOpen:P,onClose:()=>B(!1),datasetId:L.id,datasetName:L.name}),(0,r.jsx)(E,{isOpen:G,onClose:()=>z(!1),datasetId:L.id,datasetName:L.name}),(0,r.jsx)(R,{isOpen:K,onClose:()=>M(!1),datasetId:L.id,datasetName:L.name})]})]})}},1738:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(5155),s=a(8173),n=a.n(s),i=a(6046),l=a(6062),o=a(8236),d=a(9602),c=a(3638);function m(){let e=(0,i.usePathname)(),t=[{name:"KGraph Dashboard",href:"/kginsights/dashboard",icon:l.A},{name:"Manage KGraph",href:"/kginsights/manage",icon:o.A}];return(0,r.jsxs)("div",{className:"w-64 h-[calc(100vh-76px)] border-r border-border p-4 bg-card/50",children:[(0,r.jsx)(c.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"text-foreground font-medium text-lg mb-4 px-4",children:"KGInsights Menu"}),(0,r.jsx)("nav",{className:"space-y-2",children:t.map((t,a)=>{let s=e===t.href||"/kginsights"===e&&0===a;return(0,r.jsx)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*a},children:(0,r.jsxs)(n(),{href:t.href,className:(0,d.cn)("flex items-center space-x-3 px-4 py-2 rounded-lg transition-all duration-200 group",s?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,r.jsx)(t.icon,{className:(0,d.cn)("w-5 h-5 transition-transform",s?"scale-110":"group-hover:scale-110")}),(0,r.jsx)("span",{children:t.name}),s&&(0,r.jsx)(c.P.div,{layoutId:"sidebar-indicator-kg",className:"absolute left-0 w-1 h-8 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})},t.href)})})]})}},5472:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(5155),s=a(3638);function n(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(s.P.div,{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full shadow-[0_0_15px_rgba(26,35,126,0.3)]",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,r.jsx)("p",{className:"mt-4 text-foreground",children:"Loading data..."})]})}},3726:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),s=a(1069),n=a(6046),i=a(2115),l=a(5472);function o(e){let{children:t,requiredRole:a,requiredPermission:o}=e,{user:d,isLoading:c}=(0,s.A)(),m=(0,n.useRouter)(),u=(0,n.usePathname)();return((0,i.useEffect)(()=>{let e="true"===sessionStorage.getItem("isLoggingOut");if(c||d){if(!c&&d){if("admin"===d.role)return;(a&&"admin"===a&&"admin"!==d.role||"researcher"===a&&!["admin","researcher"].includes(d.role))&&m.push("/"),o&&d.permissions&&!d.permissions.includes(o)&&m.push("/")}}else e?(sessionStorage.removeItem("isLoggingOut"),m.push("/")):m.push("/login?redirect=".concat(encodeURIComponent(u)))},[d,c,m,u,a,o]),c)?(0,r.jsx)("div",{className:"min-h-screen bg-black/[0.96] flex items-center justify-center",children:(0,r.jsx)(l.A,{})}):d?"admin"===d.role?(0,r.jsx)(r.Fragment,{children:t}):a&&("admin"===a&&"admin"!==d.role||"researcher"===a&&!["admin","researcher"].includes(d.role))||o&&d.permissions&&!d.permissions.includes(o)?null:(0,r.jsx)(r.Fragment,{children:t}):null}},9286:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var r=a(5155),s=a(6421),n=a(9602);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...s})}},5007:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>m});var r=a(5155),s=a(2115),n=a(9602);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"},7837:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>m,Es:()=>h,L3:()=>p,c7:()=>u,lG:()=>o});var r=a(5155),s=a(2115),n=a(6217),i=a(767),l=a(9602);let o=n.bL;n.l9;let d=n.ZL;n.bm;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=n.hJ.displayName;let m=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[s,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=n.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})}).displayName=n.VY.displayName},2336:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var r=a(5155),s=a(2115),n=a(9602);let i=s.forwardRef((e,t)=>{let{className:a,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},5785:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var r=a(5155),s=a(2115),n=a(6195),i=a(6421),l=a(9602);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),a),...s})});d.displayName=n.b.displayName},3392:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var r=a(5155),s=a(2115),n=a(1868),i=a(9602);let l=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(n.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...l,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(o,{}),(0,r.jsx)(n.OK,{})]})});l.displayName=n.bL.displayName;let o=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...l}=e;return(0,r.jsx)(n.VM,{ref:t,orientation:s,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 border-t border-t-transparent p-[1px]",a),...l,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=n.VM.displayName},2079:(e,t,a)=>{"use strict";a.d(t,{A0:()=>l,BF:()=>o,Hj:()=>d,XI:()=>i,nA:()=>m,nd:()=>c});var r=a(5155),s=a(2115),n=a(9602);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},9134:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(2115);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5739:(e,t,a)=>{"use strict";a.d(t,{iI:()=>l,tO:()=>i});let r="http://localhost:9090/api".startsWith("/")?"".concat(window.location.origin).concat("http://localhost:9090/api"):"http://localhost:9090/api",s={kgraphDashboard:{graph:{nodes:[{id:1,label:"Person A",type:"Person",color:"#8B5CF6",x:150,y:100},{id:2,label:"Person B",type:"Person",color:"#8B5CF6",x:250,y:150},{id:3,label:"Organization X",type:"Organization",color:"#EC4899",x:100,y:200},{id:4,label:"Location Y",type:"Location",color:"#3B82F6",x:200,y:250},{id:5,label:"Event Z",type:"Event",color:"#10B981",x:300,y:100}],edges:[{id:1,from_node:1,to_node:2,label:"knows"},{id:2,from_node:1,to_node:3,label:"works at"},{id:3,from_node:2,to_node:4,label:"lives in"},{id:4,from_node:3,to_node:5,label:"hosts"},{id:5,from_node:4,to_node:5,label:"location of"}]},metrics:{total_nodes:1245,total_edges:3872,density:.68,avg_degree:6.2},updates:[{action:"Graph updated",time:"Today at 11:30 AM"},{action:"New nodes added",time:"Yesterday at 3:45 PM"},{action:"Relationships modified",time:"2 days ago at 9:20 AM"},{action:"Data source connected",time:"3 days ago at 2:15 PM"}]},dataDashboard:{metrics:{total_records:35e3,processed_records:8500,failed_records:120,processing_time:5.7},recent_activities:[{id:"1",action:"Data import completed",time:"10 minutes ago",status:"success"},{id:"2",action:"Transformation started",time:"25 minutes ago",status:"processing"},{id:"3",action:"Export scheduled",time:"1 hour ago",status:"pending"},{id:"4",action:"Data validation failed",time:"2 hours ago",status:"error"}],chart_data:{bar_chart:[40,70,30,80,60,50,65],pie_chart:[{label:"Type A",value:45,color:"#8B5CF6"},{label:"Type B",value:30,color:"#EC4899"},{label:"Type C",value:15,color:"#3B82F6"},{label:"Type D",value:10,color:"#10B981"}],line_chart:{current:[40,60,45,70,55,65],previous:[30,50,40,60,45,55]}}}};async function n(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{console.log("Fetching from: ".concat(r).concat(e));let t=await fetch("".concat(r).concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),a=t.headers.get("content-type");if(!a||!a.includes("application/json")){let e=await t.text();throw console.error("Received non-JSON response:",e.substring(0,200)+"..."),Error("Server returned non-JSON response")}if(!t.ok)throw Error("API error: ".concat(t.status));return await t.json()}catch(a){if(console.error("Error fetching ".concat(e,":"),a),t){if(console.log("Using fallback data for ".concat(e)),"/kginsights/dashboard"===e)return s.kgraphDashboard;if("/datapuur/dashboard"===e)return s.dataDashboard}throw a}}async function i(){return n("/datapuur/dashboard")}async function l(){return n("/kginsights/dashboard")}}},e=>{var t=t=>e(e.s=t);e.O(0,[487,565,475,440,714,786,441,517,358],()=>t(7947)),_N_E=e.O()}]);