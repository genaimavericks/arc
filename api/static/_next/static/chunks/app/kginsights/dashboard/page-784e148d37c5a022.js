(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{8047:(e,a,t)=>{Promise.resolve().then(t.bind(t,9325))},9325:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var r=t(5155),i=t(4110),s=t(425),n=t(1738),o=t(3638),l=t(6781),d=t(2115),c=t(5739),h=t(5472),u=t(3726);function m(){return(0,r.jsx)(u.A,{requiredPermission:"kginsights:read",children:(0,r.jsx)(p,{})})}function p(){let[e,a]=(0,d.useState)(null),[t,u]=(0,d.useState)(!0),[m,p]=(0,d.useState)(null);(0,d.useEffect)(()=>{(async()=>{try{u(!0);let e=await (0,c.iI)();console.log("Successfully fetched KGraph dashboard data:",e),a(e),p(null)}catch(e){console.error("Error fetching KGraph dashboard data:",e),p("Failed to load KGraph dashboard data. Using fallback data.")}finally{u(!1)}})()},[]);let x={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};if(t)return(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(s.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,r.jsx)(h.A,{})})]})]})]});let y=m&&e;return m&&!e?(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(s.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("div",{className:"flex-1 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-6",children:"Error"}),(0,r.jsx)("p",{className:"text-destructive text-xl mb-8",children:m}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-primary hover:bg-primary/90 text-primary-foreground px-6 py-2 rounded-lg",children:"Retry"})]})})]})]})]}):e?(0,r.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,r.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,r.jsx)(s.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,r.jsxs)("div",{className:"relative z-10",children:[(0,r.jsx)(i.A,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(n.A,{}),(0,r.jsxs)("div",{className:"flex-1 p-8",children:[y&&(0,r.jsx)("div",{className:"bg-yellow-500/20 border border-yellow-500 text-yellow-700 dark:text-yellow-200 px-4 py-2 rounded-md mb-4",children:(0,r.jsxs)("p",{children:[m," - Using demo data instead."]})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)(o.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-foreground mb-6",children:"KGraph Dashboard"}),(0,r.jsx)(o.P.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground text-xl mb-8",children:"Visualize and explore your knowledge graphs."}),(0,r.jsxs)(o.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-8",children:[(0,r.jsxs)(o.P.div,{variants:x,whileHover:{scale:1.01},className:"bg-card backdrop-blur-sm p-6 rounded-lg border border-border h-96 mb-8 relative overflow-hidden group",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold text-card-foreground mb-4 flex items-center",children:[(0,r.jsx)(l.A,{className:"w-5 h-5 mr-2 text-primary"}),"Knowledge Graph Visualization"]}),(0,r.jsx)("div",{className:"h-80 relative",children:(0,r.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 400 300",children:[e.graph.edges.map((a,t)=>{let i=e.graph.nodes.find(e=>e.id===a.from_node),s=e.graph.nodes.find(e=>e.id===a.to_node);if(!i||!s)return null;let n=(i.x+s.x)/2,l=(i.y+s.y)/2-10;return(0,r.jsxs)("g",{children:[(0,r.jsx)(o.P.line,{x1:i.x,y1:i.y,x2:s.x,y2:s.y,stroke:"rgba(var(--foreground), 0.3)",strokeWidth:"1",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:1,delay:.5+.1*t}}),(0,r.jsx)(o.P.text,{x:n,y:l,textAnchor:"middle",fill:"rgba(var(--foreground), 0.5)",fontSize:"8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:1.5+.1*t},children:a.label})]},"edge-".concat(t))}),e.graph.nodes.map((e,a)=>(0,r.jsxs)("g",{children:[(0,r.jsx)(o.P.circle,{cx:e.x,cy:e.y,r:"15",fill:e.color,initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2*a},whileHover:{scale:1.2}}),(0,r.jsx)(o.P.text,{x:e.x,y:e.y+25,textAnchor:"middle",fill:"var(--foreground)",fontSize:"10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5+.2*a},children:e.label})]},"node-".concat(e.id)))]})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(o.P.div,{variants:x,whileHover:{scale:1.02},className:"bg-card backdrop-blur-sm p-6 rounded-lg border border-border relative overflow-hidden group",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Graph Metrics"}),(0,r.jsx)("div",{className:"space-y-4 mt-4",children:[{label:"Total Nodes",value:e.metrics.total_nodes.toLocaleString(),delay:.1},{label:"Total Edges",value:e.metrics.total_edges.toLocaleString(),delay:.2},{label:"Density",value:e.metrics.density.toFixed(2),delay:.3},{label:"Average Degree",value:e.metrics.avg_degree.toFixed(1),delay:.4}].map((e,a)=>(0,r.jsxs)(o.P.div,{className:"flex justify-between",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:e.delay+1},children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:e.label}),(0,r.jsx)(o.P.span,{className:"text-card-foreground font-medium",initial:{opacity:0},animate:{opacity:1},transition:{delay:e.delay+1.2},children:e.value})]},a))}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-cyan-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,r.jsxs)(o.P.div,{variants:x,whileHover:{scale:1.02},className:"bg-card backdrop-blur-sm p-6 rounded-lg border border-border relative overflow-hidden group",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Recent Updates"}),(0,r.jsx)("div",{className:"space-y-4 mt-4",children:e.updates.map((e,a)=>(0,r.jsxs)(o.P.div,{className:"p-2 border-b border-border",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a+1},children:[(0,r.jsx)("p",{className:"text-card-foreground",children:e.action}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:e.time})]},a))}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-violet-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]})]})]})]})]})]}):null}},1738:(e,a,t)=>{"use strict";t.d(a,{A:()=>h});var r=t(5155),i=t(8173),s=t.n(i),n=t(6046),o=t(6062),l=t(8236),d=t(9602),c=t(3638);function h(){let e=(0,n.usePathname)(),a=[{name:"KGraph Dashboard",href:"/kginsights/dashboard",icon:o.A},{name:"Manage KGraph",href:"/kginsights/manage",icon:l.A}];return(0,r.jsxs)("div",{className:"w-64 h-[calc(100vh-76px)] border-r border-border p-4 bg-card/50",children:[(0,r.jsx)(c.P.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"text-foreground font-medium text-lg mb-4 px-4",children:"KGInsights Menu"}),(0,r.jsx)("nav",{className:"space-y-2",children:a.map((a,t)=>{let i=e===a.href||"/kginsights"===e&&0===t;return(0,r.jsx)(c.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},children:(0,r.jsxs)(s(),{href:a.href,className:(0,d.cn)("flex items-center space-x-3 px-4 py-2 rounded-lg transition-all duration-200 group",i?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[(0,r.jsx)(a.icon,{className:(0,d.cn)("w-5 h-5 transition-transform",i?"scale-110":"group-hover:scale-110")}),(0,r.jsx)("span",{children:a.name}),i&&(0,r.jsx)(c.P.div,{layoutId:"sidebar-indicator-kg",className:"absolute left-0 w-1 h-8 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2}})]})},a.href)})})]})}},5472:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(5155),i=t(3638);function s(){return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)(i.P.div,{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full shadow-[0_0_15px_rgba(26,35,126,0.3)]",animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"}}),(0,r.jsx)("p",{className:"mt-4 text-foreground",children:"Loading data..."})]})}},3726:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(5155),i=t(1069),s=t(6046),n=t(2115),o=t(5472);function l(e){let{children:a,requiredRole:t,requiredPermission:l}=e,{user:d,isLoading:c}=(0,i.A)(),h=(0,s.useRouter)(),u=(0,s.usePathname)();return((0,n.useEffect)(()=>{let e="true"===sessionStorage.getItem("isLoggingOut");if(c||d){if(!c&&d){if("admin"===d.role)return;(t&&"admin"===t&&"admin"!==d.role||"researcher"===t&&!["admin","researcher"].includes(d.role))&&h.push("/"),l&&d.permissions&&!d.permissions.includes(l)&&h.push("/")}}else e?(sessionStorage.removeItem("isLoggingOut"),h.push("/")):h.push("/login?redirect=".concat(encodeURIComponent(u)))},[d,c,h,u,t,l]),c)?(0,r.jsx)("div",{className:"min-h-screen bg-black/[0.96] flex items-center justify-center",children:(0,r.jsx)(o.A,{})}):d?"admin"===d.role?(0,r.jsx)(r.Fragment,{children:a}):t&&("admin"===t&&"admin"!==d.role||"researcher"===t&&!["admin","researcher"].includes(d.role))||l&&d.permissions&&!d.permissions.includes(l)?null:(0,r.jsx)(r.Fragment,{children:a}):null}},5739:(e,a,t)=>{"use strict";t.d(a,{iI:()=>l,tO:()=>o});var r=t(7358);let i=r.env.NEXT_PUBLIC_API_URL?r.env.NEXT_PUBLIC_API_URL.startsWith("/")?"".concat(window.location.origin).concat(r.env.NEXT_PUBLIC_API_URL):r.env.NEXT_PUBLIC_API_URL:"http://172.104.129.10:9090/api",s={kgraphDashboard:{graph:{nodes:[{id:1,label:"Person A",type:"Person",color:"#8B5CF6",x:150,y:100},{id:2,label:"Person B",type:"Person",color:"#8B5CF6",x:250,y:150},{id:3,label:"Organization X",type:"Organization",color:"#EC4899",x:100,y:200},{id:4,label:"Location Y",type:"Location",color:"#3B82F6",x:200,y:250},{id:5,label:"Event Z",type:"Event",color:"#10B981",x:300,y:100}],edges:[{id:1,from_node:1,to_node:2,label:"knows"},{id:2,from_node:1,to_node:3,label:"works at"},{id:3,from_node:2,to_node:4,label:"lives in"},{id:4,from_node:3,to_node:5,label:"hosts"},{id:5,from_node:4,to_node:5,label:"location of"}]},metrics:{total_nodes:1245,total_edges:3872,density:.68,avg_degree:6.2},updates:[{action:"Graph updated",time:"Today at 11:30 AM"},{action:"New nodes added",time:"Yesterday at 3:45 PM"},{action:"Relationships modified",time:"2 days ago at 9:20 AM"},{action:"Data source connected",time:"3 days ago at 2:15 PM"}]},dataDashboard:{metrics:{total_records:35e3,processed_records:8500,failed_records:120,processing_time:5.7},recent_activities:[{id:"1",action:"Data import completed",time:"10 minutes ago",status:"success"},{id:"2",action:"Transformation started",time:"25 minutes ago",status:"processing"},{id:"3",action:"Export scheduled",time:"1 hour ago",status:"pending"},{id:"4",action:"Data validation failed",time:"2 hours ago",status:"error"}],chart_data:{bar_chart:[40,70,30,80,60,50,65],pie_chart:[{label:"Type A",value:45,color:"#8B5CF6"},{label:"Type B",value:30,color:"#EC4899"},{label:"Type C",value:15,color:"#3B82F6"},{label:"Type D",value:10,color:"#10B981"}],line_chart:{current:[40,60,45,70,55,65],previous:[30,50,40,60,45,55]}}}};async function n(e){let a=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{console.log("Fetching from: ".concat(i).concat(e));let a=await fetch("".concat(i).concat(e),{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}),t=a.headers.get("content-type");if(!t||!t.includes("application/json")){let e=await a.text();throw console.error("Received non-JSON response:",e.substring(0,200)+"..."),Error("Server returned non-JSON response")}if(!a.ok)throw Error("API error: ".concat(a.status));return await a.json()}catch(t){if(console.error("Error fetching ".concat(e,":"),t),a){if(console.log("Using fallback data for ".concat(e)),"/kginsights/dashboard"===e)return s.kgraphDashboard;if("/datapuur/dashboard"===e)return s.dataDashboard}throw t}}async function o(){return n("/datapuur/dashboard")}async function l(){return n("/kginsights/dashboard")}},6062:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},5236:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},6710:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},2104:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},6781:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},8236:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7725:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},1466:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(7401).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[487,565,786,441,517,358],()=>a(8047)),_N_E=e.O()}]);