(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{4963:(e,a,t)=>{Promise.resolve().then(t.bind(t,2660))},2660:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>en});var s=t(5155),r=t(2115),l=t(4110),n=t(425),i=t(7803),d=t(1641),o=t(2401),c=t(1594),m=t(4081),u=t(767),x=t(8684),h=t(4085),p=t(7211),g=t(6421),f=t(9602);let b=(0,g.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),j=r.forwardRef((e,a)=>{let{className:t,variant:r,...l}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:(0,f.cn)(b({variant:r}),t),...l})});j.displayName="Alert",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h5",{ref:a,className:(0,f.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})}).displayName="AlertTitle";let v=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,f.cn)("text-sm [&_p]:leading-relaxed",t),...r})});v.displayName="AlertDescription";var y=t(3638);function N(e){let{onSchemaDetected:a,isProcessing:t,setIsProcessing:l,chunkSize:n,onStatusChange:i,onJobCreated:d,onJobUpdated:g,onError:f}=e,[b,N]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[k,_]=(0,r.useState)({}),[C,A]=(0,r.useState)(""),F=(0,r.useRef)(null),B=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?S(!0):"dragleave"===e.type&&S(!1)},D=e=>{let a=e.filter(e=>{let a=e.name.split(".").pop().toLowerCase();return"csv"!==a&&"json"!==a?(A("File ".concat(e.name," is not supported. Only CSV and JSON files are allowed.")),!1):!(e.size>0x80000000)||(A("File ".concat(e.name," exceeds 2GB limit.")),!1)});a.length>0&&(N(e=>[...e,...a]),A(""))},E=e=>{N(a=>a.filter((a,t)=>t!==e)),_({}),A("")},z=async()=>{if(0!==b.length){l(!0),_({}),A(""),i("Preparing to upload ".concat(b.length," file").concat(b.length>1?"s":"","..."));for(let e=0;e<b.length;e++){let t=b[e];try{i("Uploading file ".concat(e+1," of ").concat(b.length,": ").concat(t.name,"..."));let s={id:"temp-".concat(Date.now(),"-").concat(e),name:t.name,type:"file",status:"uploading",progress:0,startTime:new Date().toISOString(),endTime:null,details:"File: ".concat(t.name," (").concat((t.size/1024/1024).toFixed(2)," MB)")};d&&(console.log("Creating initial job:",s),d(s));let r=new FormData;r.append("file",t),r.append("chunkSize",n.toString());let l=new XMLHttpRequest;l.upload.addEventListener("progress",a=>{if(a.lengthComputable){let r=Math.round(a.loaded/a.total*100),l={...s,progress:r,details:"Uploading: ".concat(r,"% of ").concat((t.size/1024/1024).toFixed(2)," MB")};g&&(console.log("Updating job progress:",l),g(l)),i("Uploading file ".concat(e+1," of ").concat(b.length,": ").concat(t.name," (").concat(r,"%)..."))}});let o=new Promise((e,a)=>{l.onload=function(){if(l.status>=200&&l.status<300)try{let a=JSON.parse(l.responseText);e(a)}catch(e){a(Error("Invalid JSON response"))}else try{let e=JSON.parse(l.responseText);a(Error(e.detail||"Failed to upload file ".concat(t.name)))}catch(e){a(Error("Failed to upload file ".concat(t.name)))}},l.onerror=function(){a(Error("Network error during upload of ".concat(t.name)))}});l.open("POST","".concat("http://localhost:9090/api","/datapuur/upload"),!0),l.setRequestHeader("Authorization","Bearer ".concat(localStorage.getItem("token"))),l.send(r);let c=await o;i("File ".concat(e+1," uploaded successfully! Processing data..."));let m=await fetch("".concat("http://localhost:9090/api","/datapuur/ingest-file"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({file_id:c.file_id,file_name:t.name,chunk_size:n})});if(!m.ok){let e=await m.json();throw Error(e.detail||"Failed to start ingestion for ".concat(t.name))}let u=await m.json(),x={id:u.job_id,name:t.name,type:"file",status:"running",progress:0,startTime:new Date().toISOString(),endTime:null,details:"File: ".concat(t.name," (").concat((t.size/1024/1024).toFixed(2)," MB)")};if(d&&d(x),i("Ingestion job started for ".concat(t.name," with ID: ").concat(u.job_id)),0===e){let e=await fetch("".concat("http://localhost:9090/api","/datapuur/schema/").concat(c.file_id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to detect schema")}let t=await e.json();a(t.schema),i("Schema detected successfully!")}_(a=>({...a,[e]:100}))}catch(a){console.error("Error uploading file ".concat(t.name,":"),a);let e=a instanceof Error?a.message:"Failed to upload file";A("Error with file ".concat(t.name,": ").concat(e)),f&&f({message:e})}}i("Completed processing ".concat(b.length," file").concat(b.length>1?"s":"")),l(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(o.A,{className:"w-5 h-5 mr-2 text-primary"}),"Upload Data Files"]}),C&&(0,s.jsxs)(j,{variant:"destructive",className:"mb-4",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)(v,{children:C})]}),0===b.length?(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(w?"border-primary bg-primary/5":"border-border bg-background/50"),onDragEnter:B,onDragLeave:B,onDragOver:B,onDrop:e=>{e.preventDefault(),e.stopPropagation(),S(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&D(Array.from(e.dataTransfer.files))},children:[(0,s.jsx)("input",{ref:F,type:"file",className:"hidden",onChange:e=>{e.preventDefault(),e.target.files&&e.target.files.length>0&&D(Array.from(e.target.files))},accept:".csv,.json",multiple:!0}),(0,s.jsx)(y.P.div,{whileHover:{scale:1.05},className:"inline-block",children:(0,s.jsx)(o.A,{className:"w-16 h-16 text-primary mx-auto mb-4"})}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Drag and drop files here, or click to browse"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,s.jsx)(h.Button,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>F.current.click(),children:"Select Files"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-2 sm:mt-0 sm:ml-2 flex items-center",children:"Supported formats: CSV, JSON"})]})]}):(0,s.jsxs)("div",{className:"border rounded-lg p-6 bg-card",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-foreground",children:["Selected Files (",b.length,")"]}),(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>N([]),disabled:t,className:"text-muted-foreground hover:text-foreground",children:"Clear All"})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto mb-4",children:b.map((e,a)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 border border-border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m.A,{className:"h-5 w-5 text-primary mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]}),void 0!==k[a]&&(0,s.jsx)("div",{className:"w-24 mr-4",children:(0,s.jsx)(p.k,{value:k[a],className:"h-2"})}),(0,s.jsx)(h.Button,{variant:"ghost",size:"icon",onClick:()=>E(a),disabled:t,className:"text-muted-foreground hover:text-foreground",children:(0,s.jsx)(u.A,{className:"h-4 w-4"})})]},a))}),(0,s.jsx)(h.Button,{className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",onClick:z,disabled:t,children:t?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Upload ",b.length," File",1!==b.length?"s":""]})})]}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Instructions:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"Upload CSV or JSON files up to 2GB"}),(0,s.jsx)("li",{children:"CSV files should use comma as delimiter and include a header row"}),(0,s.jsx)("li",{children:"JSON files should contain an array of objects with consistent structure"}),(0,s.jsx)("li",{children:"The system will automatically detect the schema of your data"}),(0,s.jsx)("li",{children:"Adjust chunk size in the Processing Configuration section for large files"}),(0,s.jsx)("li",{children:"Monitor ingestion progress in the Ingestion Jobs section"})]})]})]})}var w=t(1476),S=t(9191),k=t(7780),_=t(9993),C=t(2336),A=t(5785),F=t(745);function B(e){let{onSchemaDetected:a,isProcessing:t,setIsProcessing:l,chunkSize:n,onStatusChange:i,onJobCreated:d,onError:o}=e,[m,u]=(0,r.useState)("mysql"),[x,p]=(0,r.useState)({host:"",port:"",database:"",username:"",password:"",table:""}),[g,f]=(0,r.useState)([]),[b,y]=(0,r.useState)(""),[N,B]=(0,r.useState)(""),D=e=>{let{name:a,value:t}=e.target;p({...x,[a]:t})},E=()=>x.host?x.port?x.database?x.username?x.table?"":"Table name is required":"Username is required":"Database name is required":"Port is required":"Host is required",z=async()=>{let e=E();if(e){y(e),o&&o({message:e});return}l(!0),y(""),i("Testing database connection...");try{let e=await fetch("".concat("http://localhost:9090/api","/datapuur/test-connection"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:x})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to connect to database")}i("Connection successful! Database is accessible.")}catch(e){console.error("Error testing connection:",e),y(e.message||"Failed to connect to database"),i(""),o&&o(e)}finally{l(!1)}},P=async()=>{let e=E();if(e){y(e),o&&o({message:e});return}l(!0),y(""),i("Connecting to database and fetching schema...");try{let e=await fetch("".concat("http://localhost:9090/api","/datapuur/db-schema"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:x,chunkSize:n})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to fetch schema")}let t=await e.json();a(t.schema),i("Schema fetched successfully!")}catch(e){console.error("Error fetching schema:",e),y(e.message||"Failed to fetch schema"),i(""),o&&o(e)}finally{l(!1)}},T=async()=>{let e=E();if(e){y(e),o&&o({message:e});return}l(!0),y(""),i("Starting database ingestion...");try{let e=await fetch("".concat("http://localhost:9090/api","/datapuur/ingest-db"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:m,config:x,chunk_size:n,connection_name:N||"".concat(m,"-").concat(x.database,"-").concat(x.table)})});if(!e.ok){let a=await e.json();throw Error(a.detail||"Failed to start ingestion")}let a=await e.json(),t={id:a.job_id,name:N||"".concat(m,"-").concat(x.database,"-").concat(x.table),type:"database",status:"running",progress:0,startTime:new Date().toISOString(),endTime:null,details:"DB: ".concat(x.database,".").concat(x.table),config:{type:m,database:x.database,table:x.table}};d&&d(t),i("Ingestion job started with ID: ".concat(a.job_id))}catch(e){console.error("Error starting ingestion:",e),y(e.message||"Failed to start ingestion"),i(""),o&&o(e)}finally{l(!1)}},M=e=>{u(e.type),p({...e.config,password:""})},I=e=>{f(g.filter(a=>a.id!==e))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(w.A,{className:"w-5 h-5 mr-2 text-primary"}),"Database Connection"]}),b&&(0,s.jsxs)(j,{variant:"destructive",className:"mb-4",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)(v,{children:b})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"connectionName",children:"Connection Name"}),(0,s.jsx)(C.p,{id:"connectionName",value:N,onChange:e=>B(e.target.value),placeholder:"e.g., Production MySQL"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"connectionType",children:"Database Type"}),(0,s.jsxs)(F.l6,{value:m,onValueChange:e=>{u(e);let a="";switch(e){case"mysql":a="3306";break;case"postgresql":a="5432";break;case"mssql":a="1433"}p({...x,port:a})},children:[(0,s.jsx)(F.bq,{id:"connectionType",children:(0,s.jsx)(F.yv,{placeholder:"Select database type"})}),(0,s.jsxs)(F.gC,{children:[(0,s.jsx)(F.eb,{value:"mysql",children:"MySQL"}),(0,s.jsx)(F.eb,{value:"postgresql",children:"PostgreSQL"}),(0,s.jsx)(F.eb,{value:"mssql",children:"SQL Server"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"host",children:"Host"}),(0,s.jsx)(C.p,{id:"host",name:"host",value:x.host,onChange:D,placeholder:"e.g., 172.104.129.10 or 192.168.1.1"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"port",children:"Port"}),(0,s.jsx)(C.p,{id:"port",name:"port",value:x.port,onChange:D,placeholder:"e.g., 3306 for MySQL"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"database",children:"Database Name"}),(0,s.jsx)(C.p,{id:"database",name:"database",value:x.database,onChange:D,placeholder:"e.g., my_database"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"username",children:"Username"}),(0,s.jsx)(C.p,{id:"username",name:"username",value:x.username,onChange:D,placeholder:"e.g., root"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"password",children:"Password"}),(0,s.jsx)(C.p,{id:"password",name:"password",type:"password",value:x.password,onChange:D,placeholder:"Enter password"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(A.J,{htmlFor:"table",children:"Table Name"}),(0,s.jsx)(C.p,{id:"table",name:"table",value:x.table,onChange:D,placeholder:"e.g., customers"})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 pt-4",children:[(0,s.jsx)(h.Button,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:z,disabled:t,children:"Test Connection"}),(0,s.jsxs)(h.Button,{variant:"outline",className:"border-secondary text-secondary hover:bg-secondary/10",onClick:P,disabled:t,children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Fetch Schema"]}),(0,s.jsxs)(h.Button,{className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:T,disabled:t,children:[(0,s.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Start Ingestion"]})]}),(0,s.jsxs)("div",{className:"border-t border-border pt-4 mt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Save Connection"}),(0,s.jsx)("div",{className:"flex space-x-2",children:(0,s.jsxs)(h.Button,{variant:"outline",className:"border-primary text-primary hover:bg-primary/10",onClick:()=>{if(!N){y("Please provide a name for this connection");return}let e=E();if(e){y(e);return}f([...g,{id:Date.now().toString(),name:N,type:m,config:{...x,password:"********"}}]),B(""),i('Connection "'.concat(N,'" saved successfully!')),setTimeout(()=>i(""),3e3)},disabled:t,children:[(0,s.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Save"]})})]}),g.length>0&&(0,s.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-4",children:"Saved Connections"}),(0,s.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-3 border border-border rounded-md bg-card/50 hover:bg-card",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.type," • ",e.config.host,":",e.config.port," • ",e.config.database]})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>M(e),className:"h-8 px-2 text-primary",children:"Load"}),(0,s.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>I(e.id),className:"h-8 px-2 text-destructive",children:(0,s.jsx)(_.A,{className:"h-4 w-4"})})]})]},e.id))})]}),(0,s.jsxs)("div",{className:"mt-4 p-4 bg-card/50 rounded-lg border border-border",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground mb-2",children:"Instructions:"}),(0,s.jsxs)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"Configure database connection details to ingest data from SQL databases"}),(0,s.jsx)("li",{children:"Supported databases: MySQL, PostgreSQL, and SQL Server"}),(0,s.jsx)("li",{children:"Test your connection before starting ingestion"}),(0,s.jsx)("li",{children:"Fetch schema to preview the table structure"}),(0,s.jsx)("li",{children:"Save connections for future use"}),(0,s.jsx)("li",{children:"Monitor ingestion progress in the Ingestion Jobs section"})]})]})]})}var D=t(1773),E=t(7364),z=t(3518),P=t(6967),T=t(9053),M=t(853),I=t(7581),V=t(2423),O=t(1719),L=t(2598),R=t(6099),U=t(6062),J=t(4857),q=t(9286),W=t(9708),Q=t(9263);function H(){let[e,a]=(0,r.useState)(!0),[t,l]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[d,o]=(0,r.useState)(""),[c,u]=(0,r.useState)("all"),[x,p]=(0,r.useState)("all"),[g,f]=(0,r.useState)("all"),[b,j]=(0,r.useState)("newest"),[v,N]=(0,r.useState)(null),[S,k]=(0,r.useState)(1),[_,A]=(0,r.useState)(1),[B]=(0,r.useState)(10),[H,X]=(0,r.useState)({}),[G,Y]=(0,r.useState)({}),[K,Z]=(0,r.useState)({}),[$,ee]=(0,r.useState)({}),[ea,et]=(0,r.useState)({}),[es,er]=(0,r.useState)(10),el=async()=>{a(!0),N(null);try{let e=await fetch("".concat("http://localhost:9090/api","/datapuur/ingestion-history?page=").concat(S,"&limit=").concat(B,"&sort=").concat(b,"&type=").concat("all"!==c?c:"","&source=").concat("all"!==x?x:"","&status=").concat("all"!==g?g:"","&search=").concat(encodeURIComponent(d)),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw Error("Failed to fetch ingestion history");let a=await e.json();l(a.items),i(a.items),A(Math.ceil(a.total/B))}catch(a){console.error("Error fetching ingestion history:",a),N("Failed to load ingestion history. Please try again later.");let e=eo();l(e),i(e),A(Math.ceil(e.length/B))}finally{a(!1)}},en=async e=>{try{let a=await fetch("".concat("http://localhost:9090/api","/datapuur/ingestion-schema/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!a.ok)throw Error("Failed to fetch schema data");return await a.json()}catch(a){return console.error("Error fetching schema for ingestion ".concat(e,":"),a),null}},ei=async e=>{try{let a=await fetch("".concat("http://localhost:9090/api","/datapuur/ingestion-preview/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!a.ok)throw Error("Failed to fetch preview data");return await a.json()}catch(a){return console.error("Error fetching preview for ingestion ".concat(e,":"),a),null}},ed=async e=>{try{let a=await fetch("".concat("http://localhost:9090/api","/datapuur/ingestion-statistics/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!a.ok)throw Error("Failed to fetch statistics data");return await a.json()}catch(a){return console.error("Error fetching statistics for ingestion ".concat(e,":"),a),null}},eo=()=>[{id:"1",filename:"customer_data_2023.csv",type:"csv",size:2621440,uploaded_at:new Date(Date.now()-1728e5).toISOString(),uploaded_by:"researcher",preview_url:"/api/datapuur/preview/1",download_url:"/api/datapuur/download/1",status:"available",source_type:"file",schema:{fields:[{name:"id",type:"integer",nullable:!1},{name:"name",type:"string",nullable:!1},{name:"email",type:"string",nullable:!1},{name:"age",type:"integer",nullable:!0},{name:"signup_date",type:"date",nullable:!1}]},statistics:{row_count:5243,column_count:5,null_percentage:2.3,memory_usage:"1.2 MB",processing_time:"3.5s"}},{id:"2",filename:"product_catalog.json",type:"json",size:1258291.2,uploaded_at:new Date(Date.now()-432e6).toISOString(),uploaded_by:"researcher",preview_url:"/api/datapuur/preview/2",download_url:"/api/datapuur/download/2",status:"available",source_type:"file",schema:{fields:[{name:"product_id",type:"string",nullable:!1},{name:"name",type:"string",nullable:!1},{name:"price",type:"number",nullable:!1},{name:"category",type:"string",nullable:!1},{name:"in_stock",type:"boolean",nullable:!1}]},statistics:{row_count:1250,column_count:5,null_percentage:0,memory_usage:"0.8 MB",processing_time:"1.2s"}},{id:"3",filename:"FoamFactory_V2_27K - Copy.csv",type:"csv",size:19503513.6,uploaded_at:new Date(Date.now()-42e4).toISOString(),uploaded_by:"admin",preview_url:"/api/datapuur/preview/3",download_url:"/api/datapuur/download/3",status:"available",source_type:"file",schema:{fields:[{name:"Factory",type:"string",nullable:!1},{name:"Date",type:"date",nullable:!1},{name:"Location",type:"string",nullable:!1},{name:"Machine Type",type:"string",nullable:!1},{name:"Machine Utilization (%)",type:"number",nullable:!1},{name:"Machine Downtime (hours)",type:"number",nullable:!1},{name:"Maintenance History",type:"string",nullable:!0},{name:"Machine Age (years)",type:"number",nullable:!1},{name:"Batch",type:"string",nullable:!1},{name:"Batch Quality (Pass %)",type:"number",nullable:!1},{name:"Cycle Time (minutes)",type:"number",nullable:!1},{name:"Energy Consumption (kWh)",type:"number",nullable:!1}]},statistics:{row_count:27e3,column_count:12,null_percentage:5.2,memory_usage:"18.6 MB",processing_time:"4.7s"}},{id:"4",filename:"user_feedback.json",type:"json",size:524288,uploaded_at:new Date(Date.now()-18e5).toISOString(),uploaded_by:"researcher",preview_url:"/api/datapuur/preview/4",download_url:"/api/datapuur/download/4",status:"failed",source_type:"file",schema:null,statistics:null},{id:"5",filename:"inventory_data.csv",type:"csv",size:5347737.6,uploaded_at:new Date(Date.now()-72e5).toISOString(),uploaded_by:"researcher",preview_url:"/api/datapuur/preview/5",download_url:"/api/datapuur/download/5",status:"available",source_type:"file",schema:{fields:[{name:"product_id",type:"string",nullable:!1},{name:"warehouse_id",type:"string",nullable:!1},{name:"quantity",type:"integer",nullable:!1},{name:"last_updated",type:"datetime",nullable:!1}]},statistics:{row_count:12500,column_count:4,null_percentage:0,memory_usage:"3.2 MB",processing_time:"5.8s"}},{id:"6",filename:"mysql-customers",type:"database",size:8703180.8,uploaded_at:new Date(Date.now()-432e5).toISOString(),uploaded_by:"admin",preview_url:"/api/datapuur/preview/6",download_url:"/api/datapuur/download/6",status:"available",source_type:"database",database_info:{type:"mysql",name:"production_db",table:"customers"},schema:{fields:[{name:"customer_id",type:"integer",nullable:!1},{name:"first_name",type:"string",nullable:!1},{name:"last_name",type:"string",nullable:!1},{name:"email",type:"string",nullable:!1},{name:"phone",type:"string",nullable:!0},{name:"address",type:"string",nullable:!0},{name:"created_at",type:"datetime",nullable:!1}]},statistics:{row_count:25e3,column_count:7,null_percentage:12.5,memory_usage:"6.7 MB",processing_time:"8.3s"}},{id:"7",filename:"postgresql-orders",type:"database",size:15938355.2,uploaded_at:new Date(Date.now()-1296e5).toISOString(),uploaded_by:"researcher",preview_url:"/api/datapuur/preview/7",download_url:"/api/datapuur/download/7",status:"available",source_type:"database",database_info:{type:"postgresql",name:"analytics_db",table:"orders"},schema:{fields:[{name:"order_id",type:"string",nullable:!1},{name:"customer_id",type:"integer",nullable:!1},{name:"order_date",type:"date",nullable:!1},{name:"total_amount",type:"number",nullable:!1},{name:"status",type:"string",nullable:!1},{name:"payment_method",type:"string",nullable:!1}]},statistics:{row_count:45e3,column_count:6,null_percentage:.5,memory_usage:"12.8 MB",processing_time:"15.2s"}},{id:"8",filename:"mssql-products",type:"database",size:4928307.2,uploaded_at:new Date(Date.now()-1728e5).toISOString(),uploaded_by:"admin",preview_url:"/api/datapuur/preview/8",download_url:"/api/datapuur/download/8",status:"failed",source_type:"database",database_info:{type:"mssql",name:"inventory_db",table:"products"},schema:null,statistics:null}],ec=e=>"3"===e?{headers:["Factory","Date","Location","Machine Type","Machine Utilization (%)","Machine Downtime (hours)","Maintenance History","Machine Age (years)","Batch","Batch Quality (Pass %)","Cycle Time (minutes)","Energy Consumption (kWh)"],data:[["Factory A","2023-01-15","North Wing","Extruder","87.5","2.3","Regular","4.5","B12345","98.7","45","320"],["Factory A","2023-01-16","North Wing","Extruder","92.1","1.5","Regular","4.5","B12346","99.2","43","315"],["Factory B","2023-01-15","South Wing","Mixer","78.3","4.2","Overhaul","6.2","B22345","95.8","52","410"],["Factory B","2023-01-16","South Wing","Mixer","81.5","3.7","Regular","6.2","B22346","96.3","50","395"],["Factory C","2023-01-15","East Wing","Cutter","94.7","1.1","Minimal","2.3","B32345","99.5","38","280"],["Factory C","2023-01-16","East Wing","Cutter","95.2","0.9","Minimal","2.3","B32346","99.7","37","275"],["Factory A","2023-01-17","North Wing","Extruder","89.3","2.1","Regular","4.5","B12347","98.9","44","318"],["Factory B","2023-01-17","South Wing","Mixer","82.7","3.5","Regular","6.2","B22347","96.5","49","390"],["Factory C","2023-01-17","East Wing","Cutter","95.5","0.8","Minimal","2.3","B32347","99.8","36","272"],["Factory A","2023-01-18","North Wing","Extruder","90.2","1.9","Regular","4.5","B12348","99.0","43","316"],["Factory B","2023-01-18","South Wing","Mixer","83.4","3.3","Regular","6.2","B22348","96.7","48","385"],["Factory C","2023-01-18","East Wing","Cutter","95.8","0.7","Minimal","2.3","B32348","99.9","35","270"],["Factory A","2023-01-19","North Wing","Extruder","91.5","1.7","Regular","4.5","B12349","99.1","42","312"],["Factory B","2023-01-19","South Wing","Mixer","84.2","3.1","Regular","6.2","B22349","97.0","47","380"],["Factory C","2023-01-19","East Wing","Cutter","96.0","0.6","Minimal","2.3","B32349","99.9","35","268"]]}:{headers:["Column 1","Column 2","Column 3","Column 4","Column 5"],data:[["Value 1-1","Value 1-2","Value 1-3","Value 1-4","Value 1-5"],["Value 2-1","Value 2-2","Value 2-3","Value 2-4","Value 2-5"],["Value 3-1","Value 3-2","Value 3-3","Value 3-4","Value 3-5"],["Value 4-1","Value 4-2","Value 4-3","Value 4-4","Value 4-5"],["Value 5-1","Value 5-2","Value 5-3","Value 5-4","Value 5-5"]]};(0,r.useEffect)(()=>{el()},[S]),(0,r.useEffect)(()=>{if(v){let e=[...t];if(d){let a=d.toLowerCase();e=e.filter(e=>{var t;return e.filename.toLowerCase().includes(a)||e.uploaded_by.toLowerCase().includes(a)||(null===(t=e.database_info)||void 0===t?void 0:t.name)&&e.database_info.name.toLowerCase().includes(a)})}"all"!==c&&(e=e.filter(e=>e.type===c)),"all"!==x&&(e=e.filter(e=>e.source_type===x)),"all"!==g&&(e=e.filter(e=>e.status===g)),e.sort((e,a)=>{let t=new Date(e.uploaded_at).getTime(),s=new Date(a.uploaded_at).getTime();return"newest"===b?s-t:t-s}),i(e)}},[t,d,c,x,g,b,v]),(0,r.useEffect)(()=>{v||el()},[S,d,c,x,g,b]);let em=e=>e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":e<0x40000000?(e/1048576).toFixed(1)+" MB":(e/0x40000000).toFixed(1)+" GB",eu=async e=>{let a=!H[e];if(X(t=>({...t,[e]:a})),G[e]||Y(a=>({...a,[e]:"preview"})),ea[e]||et(a=>({...a,[e]:1})),a){let a=t.find(a=>a.id===e);if(a){ee(a=>({...a,[e]:{preview:!0,schema:!0,stats:!0}}));try{if(v){let t=ec(e),s=a.schema,r=a.statistics;await new Promise(e=>setTimeout(e,500)),Z(a=>({...a,[e]:{preview:t,schema:s,stats:r}}))}else{let[a,t,s]=await Promise.all([ei(e),en(e),ed(e)]);Z(r=>({...r,[e]:{preview:a,schema:t,stats:s}}))}}catch(a){console.error("Error fetching data for ingestion ".concat(e,":"),a)}finally{ee(a=>({...a,[e]:{preview:!1,schema:!1,stats:!1}}))}}}},ex=(e,a)=>{Y(t=>({...t,[e]:a}))},eh=async e=>{if(e.download_url)try{window.open(e.download_url,"_blank")}catch(e){console.error("Error downloading file:",e),N("Failed to download file. Please try again later.")}},ep=(e,a)=>{et(t=>({...t,[e]:a}))},eg=e=>{var a;let t=null===(a=K[e])||void 0===a?void 0:a.preview;return t&&t.data?Math.ceil(t.data.length/es):1},ef=e=>{var a;let t=null===(a=K[e])||void 0===a?void 0:a.preview;if(!t||!t.data)return{headers:[],rows:[]};let s=((ea[e]||1)-1)*es;return{headers:t.headers||[],rows:t.data.slice(s,s+es)}},eb=e=>{var a,t;let r=e.id;if(null===(a=$[r])||void 0===a?void 0:a.preview)return(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})});if("failed"===e.status)return(0,s.jsx)("div",{className:"p-4 bg-destructive/10 border border-destructive rounded-md text-destructive",children:"This ingestion failed. No preview data is available."});let l=null===(t=K[r])||void 0===t?void 0:t.preview;if(!l||!l.data||0===l.data.length)return(0,s.jsx)("div",{className:"p-4 bg-muted/30 rounded-md text-muted-foreground",children:"No preview data available for this ingestion."});let{headers:n,rows:i}=ef(r),d=eg(r),o=ea[r]||1;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-card shadow-sm border border-border rounded-md overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-muted/50",children:n.map((e,a)=>(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-muted-foreground border-b",children:e},a))})}),(0,s.jsx)("tbody",{children:i.map((e,a)=>(0,s.jsx)("tr",{className:a%2==0?"bg-background":"bg-muted/20",children:e.map((e,a)=>(0,s.jsx)("td",{className:"px-4 py-2 text-sm border-b border-border",children:null!==e?String(e):(0,s.jsx)("span",{className:"text-muted-foreground italic",children:"NULL"})},a))},a))})]})})}),d>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(o-1)*es+1," to"," ",Math.min(o*es,l.data.length)," of ",l.data.length," rows"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>ep(r,1),disabled:1===o,children:(0,s.jsx)(E.A,{className:"h-4 w-4"})}),(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>ep(r,o-1),disabled:1===o,children:(0,s.jsx)(z.A,{className:"h-4 w-4"})}),(0,s.jsxs)("span",{className:"text-sm",children:["Page ",o," of ",d]}),(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>ep(r,o+1),disabled:o===d,children:(0,s.jsx)(P.A,{className:"h-4 w-4"})}),(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>ep(r,d),disabled:o===d,children:(0,s.jsx)(T.A,{className:"h-4 w-4"})})]})]})]})},ej=e=>{var a,t;let r=e.id,l=null===(a=$[r])||void 0===a?void 0:a.schema,n=null===(t=K[r])||void 0===t?void 0:t.schema;return l?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})}):n&&n.fields?(0,s.jsx)("div",{className:"bg-card shadow-sm border border-border rounded-md overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted/50",children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-muted-foreground border-b",children:"Field Name"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-muted-foreground border-b",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-muted-foreground border-b",children:"Nullable"}),n.sample_values&&(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-muted-foreground border-b",children:"Sample Value"})]})}),(0,s.jsx)("tbody",{children:n.fields.map((e,a)=>(0,s.jsxs)("tr",{className:a%2==0?"bg-background":"bg-muted/20",children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm font-medium border-b border-border",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm border-b border-border",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("string"===e.type||"text"===e.type?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"integer"===e.type||"number"===e.type||"float"===e.type?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"date"===e.type||"datetime"===e.type||"timestamp"===e.type?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":"boolean"===e.type?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:e.type})}),(0,s.jsx)("td",{className:"px-4 py-2 text-sm border-b border-border",children:e.nullable?"Yes":"No"}),n.sample_values&&(0,s.jsx)("td",{className:"px-4 py-2 text-sm border-b border-border truncate max-w-[200px]",children:null!==n.sample_values[a]&&void 0!==n.sample_values[a]?"object"==typeof n.sample_values[a]?JSON.stringify(n.sample_values[a]):String(n.sample_values[a]):(0,s.jsx)("span",{className:"text-muted-foreground italic",children:"NULL"})})]},a))})]})})}):(0,s.jsx)("div",{className:"p-4 bg-muted/30 rounded-md text-muted-foreground",children:"No schema information available for this ingestion."})},ev=e=>{var a,t,r,l;let n=e.id,i=null===(a=$[n])||void 0===a?void 0:a.stats,d=null===(t=K[n])||void 0===t?void 0:t.stats;return i?(0,s.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,s.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})}):d?(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Row Count"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:(null===(r=d.row_count)||void 0===r?void 0:r.toLocaleString())||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Column Count"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:d.column_count||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Null Percentage"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[(null===(l=d.null_percentage)||void 0===l?void 0:l.toFixed(2))||"N/A","%"]})]}),(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Memory Usage"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:d.memory_usage||"N/A"})]}),(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Processing Time"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-foreground",children:d.processing_time||"N/A"})]}),d.data_density&&(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Data Density"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[d.data_density," rows/KB"]})]}),void 0!==d.completion_rate&&(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Completion Rate"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[d.completion_rate.toFixed(2),"%"]})]}),void 0!==d.error_rate&&(0,s.jsxs)("div",{className:"bg-card shadow-sm p-4 rounded-md border border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Error Rate"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-foreground",children:[d.error_rate.toFixed(2),"%"]})]})]}):(0,s.jsx)("div",{className:"p-4 bg-muted/30 rounded-md text-muted-foreground",children:"No statistics available for this ingestion."})},ey={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(M.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),(0,s.jsx)(C.p,{placeholder:"Search files by name or uploader...",value:d,onChange:e=>o(e.target.value),className:"pl-10"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsxs)(F.l6,{value:c,onValueChange:u,children:[(0,s.jsx)(F.bq,{className:"w-[180px]",children:(0,s.jsx)(F.yv,{placeholder:"File Type"})}),(0,s.jsxs)(F.gC,{children:[(0,s.jsx)(F.eb,{value:"all",children:"All Types"}),(0,s.jsx)(F.eb,{value:"csv",children:"CSV"}),(0,s.jsx)(F.eb,{value:"json",children:"JSON"}),(0,s.jsx)(F.eb,{value:"database",children:"Database"})]})]}),(0,s.jsxs)(F.l6,{value:x,onValueChange:p,children:[(0,s.jsx)(F.bq,{className:"w-[180px]",children:(0,s.jsx)(F.yv,{placeholder:"Source Type"})}),(0,s.jsxs)(F.gC,{children:[(0,s.jsx)(F.eb,{value:"all",children:"All Sources"}),(0,s.jsx)(F.eb,{value:"file",children:"File Upload"}),(0,s.jsx)(F.eb,{value:"database",children:"Database"})]})]}),(0,s.jsxs)(F.l6,{value:g,onValueChange:f,children:[(0,s.jsx)(F.bq,{className:"w-[180px]",children:(0,s.jsx)(F.yv,{placeholder:"Status"})}),(0,s.jsxs)(F.gC,{children:[(0,s.jsx)(F.eb,{value:"all",children:"All Status"}),(0,s.jsx)(F.eb,{value:"available",children:"Available"}),(0,s.jsx)(F.eb,{value:"archived",children:"Archived"}),(0,s.jsx)(F.eb,{value:"processing",children:"Processing"}),(0,s.jsx)(F.eb,{value:"failed",children:"Failed"})]})]}),(0,s.jsxs)(F.l6,{value:b,onValueChange:j,children:[(0,s.jsx)(F.bq,{className:"w-[180px]",children:(0,s.jsx)(F.yv,{placeholder:"Sort Order"})}),(0,s.jsxs)(F.gC,{children:[(0,s.jsx)(F.eb,{value:"newest",children:"Newest First"}),(0,s.jsx)(F.eb,{value:"oldest",children:"Oldest First"})]})]}),(0,s.jsxs)(h.Button,{variant:"outline",onClick:el,className:"flex items-center gap-2",children:[(0,s.jsx)(D.A,{className:"h-4 w-4 ".concat(e?"animate-spin":"")}),"Refresh"]})]})]}),v&&(0,s.jsx)("div",{className:"bg-destructive/10 border border-destructive text-destructive p-3 rounded-md",children:v}),e?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)(D.A,{className:"h-8 w-8 animate-spin text-primary"})}):0===n.length?(0,s.jsxs)("div",{className:"text-center p-12 border border-dashed border-border rounded-lg",children:[(0,s.jsx)(m.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No files found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:d||"all"!==c||"all"!==x||"all"!==g?"Try adjusting your search or filters":"Upload files or connect to databases to see them in your history"})]}):(0,s.jsx)(y.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"show",className:"space-y-4",children:n.map(e=>(0,s.jsxs)(y.P.div,{variants:ey,className:"border rounded-lg overflow-hidden bg-card/50 hover:bg-card/80 transition-colors",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 cursor-pointer",onClick:()=>eu(e.id),children:[(0,s.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:["file"===e.source_type?(0,s.jsx)(m.A,{className:"h-5 w-5 text-primary flex-shrink-0"}):(0,s.jsx)(w.A,{className:"h-5 w-5 text-secondary flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-foreground truncate",children:e.filename}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(q.E,{className:"text-xs",children:e.type.toUpperCase()}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:["Uploaded by ",e.uploaded_by]})]})]})]}),(0,s.jsxs)("div",{className:"col-span-2 flex items-center text-muted-foreground",children:[(0,s.jsx)(I.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),em(e.size)]}),(0,s.jsxs)("div",{className:"col-span-3 flex items-center text-muted-foreground",children:[(0,s.jsx)(V.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,W.m)(new Date(e.uploaded_at),{addSuffix:!0})}),(0,s.jsx)("div",{className:"text-xs",children:(0,Q.GP)(new Date(e.uploaded_at),"MMM d, yyyy")})]})]}),(0,s.jsxs)("div",{className:"col-span-2 flex items-center gap-2",children:[(0,s.jsx)(q.E,{className:"".concat("available"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"processing"===e.status?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"failed"===e.status?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:e.status}),(0,s.jsx)(O.A,{className:"h-4 w-4 transition-transform ".concat(H[e.id]?"rotate-180":"")})]})]}),H[e.id]&&(0,s.jsxs)("div",{className:"border-t border-border p-4",children:[(0,s.jsx)("div",{className:"border-b border-border mb-4",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("button",{className:"pb-2 px-1 text-sm font-medium ".concat("preview"===G[e.id]?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>ex(e.id,"preview"),children:[(0,s.jsx)(L.A,{className:"h-4 w-4 inline mr-1"}),"Preview"]}),(0,s.jsxs)("button",{className:"pb-2 px-1 text-sm font-medium ".concat("schema"===G[e.id]?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>ex(e.id,"schema"),children:[(0,s.jsx)(R.A,{className:"h-4 w-4 inline mr-1"}),"Schema"]}),(0,s.jsxs)("button",{className:"pb-2 px-1 text-sm font-medium ".concat("stats"===G[e.id]?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>ex(e.id,"stats"),children:[(0,s.jsx)(U.A,{className:"h-4 w-4 inline mr-1"}),"Statistics"]})]})}),(0,s.jsxs)("div",{className:"py-2",children:["preview"===G[e.id]&&eb(e),"schema"===G[e.id]&&ej(e),"stats"===G[e.id]&&ev(e)]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-border",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"database"===e.source_type&&e.database_info&&(0,s.jsxs)("span",{children:["Database: ",e.database_info.type," • ",e.database_info.name,".",e.database_info.table]})}),(0,s.jsx)("div",{className:"flex space-x-2",children:"available"===e.status&&(0,s.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>eh(e),className:"flex items-center",children:[(0,s.jsx)(J.A,{className:"h-4 w-4 mr-1"}),"Download"]})})]})]})]},e.id))}),_>1&&(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>k(e=>Math.max(e-1,1)),disabled:1===S||e,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",S," of ",_]}),(0,s.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>k(e=>Math.min(e+1,_)),disabled:S===_||e,children:"Next"})]})})]})}function X(e){let{schema:a}=e,[t,l]=(0,r.useState)({});if(!a||!a.fields)return(0,s.jsx)("div",{className:"text-center p-4 text-muted-foreground",children:"No schema detected yet. Upload a file or connect to a database to view the schema."});let n=e=>{l({...t,[e]:!t[e]})},i=e=>{switch(e.toLowerCase()){case"string":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"number":case"integer":case"float":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"boolean":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"date":case"datetime":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"object":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300";case"array":return"bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:a.name||"Data Schema"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.fields.length," fields detected"]})]}),(0,s.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="schema.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},className:"text-primary border-primary hover:bg-primary/10",children:[(0,s.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"Download Schema"]})]}),(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-3 bg-muted text-muted-foreground font-medium text-sm",children:[(0,s.jsx)("div",{className:"col-span-4",children:"Field Name"}),(0,s.jsx)("div",{className:"col-span-2",children:"Type"}),(0,s.jsx)("div",{className:"col-span-2",children:"Format"}),(0,s.jsx)("div",{className:"col-span-2",children:"Nullable"}),(0,s.jsx)("div",{className:"col-span-2",children:"Sample"})]}),(0,s.jsx)("div",{className:"divide-y divide-border",children:a.fields.map((e,a)=>(0,s.jsxs)(y.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"grid grid-cols-12 gap-4 p-3 hover:bg-muted/50 cursor-pointer",onClick:()=>n(e.name),children:[(0,s.jsxs)("div",{className:"col-span-4 font-medium text-foreground flex items-center",children:[e.children&&e.children.length>0?t[e.name]?(0,s.jsx)(O.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,s.jsx)(P.A,{className:"h-4 w-4 mr-1 text-muted-foreground"}):(0,s.jsx)("span",{className:"w-5"}),e.name]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(q.E,{className:"font-normal ".concat(i(e.type)),children:e.type})}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.format||"-"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:e.nullable?"Yes":"No"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==e.sample&&null!==e.sample?String(e.sample).substring(0,20)+(String(e.sample).length>20?"...":""):"-"}),t[e.name]&&e.children&&e.children.length>0&&(0,s.jsx)("div",{className:"col-span-12 pl-6 border-l-2 border-muted ml-2 mt-2",children:(0,s.jsx)("div",{className:"space-y-2",children:e.children.map((a,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-2 bg-muted/30 rounded-md",children:[(0,s.jsx)("div",{className:"col-span-4 font-medium text-foreground",children:a.name}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(q.E,{className:"font-normal ".concat(i(a.type)),children:a.type})}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:a.format||"-"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground",children:a.nullable?"Yes":"No"}),(0,s.jsx)("div",{className:"col-span-2 text-muted-foreground truncate",children:void 0!==a.sample&&null!==a.sample?String(a.sample).substring(0,20)+(String(a.sample).length>20?"...":""):"-"})]},"".concat(e.name,"-").concat(a.name)))})})]},e.name))})]})]})}var G=t(5900);let Y=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsxs)(G.bL,{ref:a,className:(0,f.cn)("relative flex w-full touch-none select-none items-center",t),...r,children:[(0,s.jsx)(G.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,s.jsx)(G.Q6,{className:"absolute h-full bg-primary"})}),(0,s.jsx)(G.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});function K(e){let{chunkSize:a,onChunkSizeChange:t,disabled:l=!1}=e,[n,i]=(0,r.useState)(a);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(A.J,{htmlFor:"chunkSize",className:"text-foreground mb-1 block",children:"Chunk Size (records per batch)"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:"Adjust the number of records processed at once for optimal performance"})]}),(0,s.jsx)("div",{className:"w-24",children:(0,s.jsx)(C.p,{id:"chunkSize",type:"number",min:100,max:1e4,step:100,value:n,onChange:e=>{let a=Number.parseInt(e.target.value);!isNaN(a)&&a>=100&&a<=1e4&&(i(a),t(a))},disabled:l,className:"text-right"})})]}),(0,s.jsx)(Y,{value:[n],min:100,max:1e4,step:100,onValueChange:e=>{let a=e[0];i(a),t(a)},disabled:l,className:"py-4"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:"100"}),(0,s.jsx)("span",{children:"1000"}),(0,s.jsx)("span",{children:"5000"}),(0,s.jsx)("span",{children:"10000"})]})]})}Y.displayName=G.bL.displayName;var Z=t(6889),$=t(3239),ee=t(5340),ea=t(6308);function et(e){let{jobs:a,onJobUpdated:t,errors:l=[],isPolling:n=!0}=e,[i,o]=(0,r.useState)("active"),[u,x]=(0,r.useState)(n),g=e=>e.startTime?e.startTime.split("T")[0]:"unknown-date",f=a.filter(e=>"running"===e.status||"queued"===e.status),b=a.filter(e=>"completed"===e.status),j=a.filter(e=>"failed"===e.status);(0,r.useEffect)(()=>{if(!u)return;let e=async()=>{let e=a.filter(e=>("running"===e.status||"queued"===e.status)&&!e.id.startsWith("temp-"));if(0!==e.length)try{for(let a of e){let e=await fetch("".concat("http://localhost:9090/api","/datapuur/job-status/").concat(a.id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let a=await e.json();t&&t(a)}}}catch(e){console.error("Error polling job status:",e)}};e();let s=setInterval(e,3e3);return()=>clearInterval(s)},[a,u,t]);let v=e=>{switch(e){case"file":default:return(0,s.jsx)(m.A,{className:"h-4 w-4"});case"database":return(0,s.jsx)(w.A,{className:"h-4 w-4"})}},y=e=>{switch(e){case"running":return(0,s.jsxs)(q.E,{className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 flex items-center gap-1",children:[(0,s.jsx)(D.A,{className:"h-3 w-3 animate-spin"}),"Running"]});case"queued":return(0,s.jsxs)(q.E,{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 flex items-center gap-1",children:[(0,s.jsx)(Z.A,{className:"h-3 w-3"}),"Queued"]});case"completed":return(0,s.jsxs)(q.E,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 flex items-center gap-1",children:[(0,s.jsx)($.A,{className:"h-3 w-3"}),"Completed"]});case"failed":return(0,s.jsxs)(q.E,{className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 flex items-center gap-1",children:[(0,s.jsx)(ee.A,{className:"h-3 w-3"}),"Failed"]});default:return(0,s.jsx)(q.E,{className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:e})}},N=e=>{if(!e)return"N/A";try{return(0,W.m)(new Date(e),{addSuffix:!0})}catch(a){return e}},S=async e=>{try{let a=await fetch("".concat("http://localhost:9090/api","/datapuur/cancel-job/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(a.ok){let e=await a.json();t&&t(e)}}catch(e){console.error("Error canceling job:",e)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>x(!u),className:u?"border-primary text-primary":"",children:[(0,s.jsx)(D.A,{className:"h-4 w-4 mr-2 ".concat(u?"animate-spin":"")}),u?"Auto-refreshing":"Auto-refresh paused"]})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[f.length," active, ",b.length," completed, ",j.length," failed"]})]}),(0,s.jsxs)(d.tU,{defaultValue:"active",value:i,onValueChange:o,children:[(0,s.jsxs)(d.j7,{className:"grid grid-cols-3",children:[(0,s.jsxs)(d.Xi,{value:"active",children:["Active Jobs ",f.length>0&&"(".concat(f.length,")")]}),(0,s.jsxs)(d.Xi,{value:"completed",children:["Completed ",b.length>0&&"(".concat(b.length,")")]}),(0,s.jsxs)(d.Xi,{value:"failed",children:["Failed ",j.length>0&&"(".concat(j.length,")")]})]}),(0,s.jsx)(d.av,{value:"active",className:"space-y-4 mt-4",children:0===f.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No active jobs"}):(0,s.jsx)(s.Fragment,{children:(e=>{let a={};return e.forEach(e=>{let t=g(e);a[t]||(a[t]=[]),a[t].push(e)}),Object.entries(a).sort((e,a)=>{let[t]=e,[s]=a;return s.localeCompare(t)}).map(e=>{let[a,t]=e;return{key:a,jobs:t}})})(f).map(e=>{let{key:a,jobs:t}=e;return(0,s.jsxs)("div",{className:"mb-6",children:[t.length>1&&(0,s.jsxs)("div",{className:"flex items-center mb-2 text-sm text-muted-foreground",children:[(0,s.jsx)(ea.A,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{children:["Batch upload (",t.length," files)"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,s.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"mr-2",children:v(e.type)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[y(e.status),(0,s.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:()=>S(e.id),className:"h-7 px-2 text-destructive hover:bg-destructive/10",children:"Cancel"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{children:["Progress: ",e.progress,"%"]}),(0,s.jsxs)("span",{children:["Started ",N(e.startTime)]})]}),(0,s.jsx)(p.k,{value:e.progress,className:"h-2"})]})]},e.id))})]},a)})})}),(0,s.jsx)(d.av,{value:"completed",className:"space-y-4 mt-4",children:0===b.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No completed jobs"}):b.map(e=>(0,s.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"mr-2",children:v(e.type)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:y(e.status)})]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground flex justify-between",children:[(0,s.jsxs)("span",{children:["Completed ",N(e.endTime||"")]}),(0,s.jsxs)("span",{children:["Duration: ",e.duration||"N/A"]})]})]},e.id))}),(0,s.jsx)(d.av,{value:"failed",className:"space-y-4 mt-4",children:0===j.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No failed jobs"}):j.map(e=>(0,s.jsxs)("div",{className:"border border-border rounded-lg p-4 bg-card/50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"mr-2",children:v(e.type)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.details})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:y(e.status)})]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-destructive",children:["Error: ",e.error||"Unknown error occurred"]}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:["Failed ",N(e.endTime||"")]})]},e.id))})]}),l.length>0&&(0,s.jsxs)("div",{className:"mt-6 border-t border-border pt-4",children:[(0,s.jsxs)("h4",{className:"font-medium text-foreground mb-2 flex items-center",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2 text-destructive"}),"Error Log"]}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.map((e,a)=>(0,s.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-2 text-sm",children:(0,s.jsx)("div",{className:"flex justify-between",children:(0,s.jsx)("span",{className:"text-destructive font-medium",children:e})})},a))})]})]})}var es=t(6745),er=t(4947),el=t(8236);function en(){let[e,a]=(0,r.useState)("file-upload"),[t,c]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[x,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(1e3),[f,b]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),S={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},k=e=>{c(e)},_=e=>{h(e)},C=e=>{b(a=>[e,...a])},A=e=>{b(a=>a.map(a=>a.id===e.id?e:a))},F=e=>{v(a=>[{id:Date.now(),message:e.message||"An unknown error occurred",timestamp:new Date().toISOString()},...a])};return(0,s.jsxs)("main",{className:"min-h-screen bg-background antialiased relative overflow-hidden",children:[(0,s.jsx)("div",{className:"h-full w-full absolute inset-0 z-0",children:(0,s.jsx)(n.n,{id:"tsparticlesfullpage",background:"transparent",minSize:.6,maxSize:1.4,particleDensity:100,className:"w-full h-full",particleColor:"var(--foreground)"})}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("div",{className:"flex-1 p-8",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,s.jsx)(y.P.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-4xl font-bold text-foreground mb-6",children:"Data Ingestion"}),(0,s.jsx)(y.P.p,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"text-muted-foreground text-xl mb-8",children:"Import and collect data from various sources for analysis and transformation."}),(0,s.jsxs)(y.P.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"space-y-8",children:[f.length>0&&(0,s.jsxs)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(es.A,{className:"w-5 h-5 mr-2 text-primary"}),"Ingestion Jobs"]}),x&&(0,s.jsx)(y.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-primary/10 border border-primary rounded-lg p-4 text-primary mb-4",children:x}),(0,s.jsx)(et,{jobs:f,onJobUpdated:A,errors:j.map(e=>e.message)})]}),(0,s.jsxs)(d.tU,{defaultValue:"file-upload",onValueChange:a,className:"w-full",children:[(0,s.jsxs)(d.j7,{className:"grid grid-cols-3 mb-8",children:[(0,s.jsxs)(d.Xi,{value:"file-upload",className:"flex items-center gap-2",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),"File Upload"]}),(0,s.jsxs)(d.Xi,{value:"database",className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-4 w-4"}),"Database Connection"]}),(0,s.jsxs)(d.Xi,{value:"history",className:"flex items-center gap-2",children:[(0,s.jsx)(er.A,{className:"h-4 w-4"}),"History"]})]}),(0,s.jsxs)(d.av,{value:"file-upload",className:"space-y-6",children:[(0,s.jsxs)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(el.A,{className:"w-5 h-5 mr-2 text-primary"}),"Processing Configuration"]}),(0,s.jsx)(K,{chunkSize:p,onChunkSizeChange:e=>{g(e)},disabled:m})]}),(0,s.jsx)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,s.jsx)(N,{onSchemaDetected:k,isProcessing:m,setIsProcessing:u,chunkSize:p,onStatusChange:_,onJobCreated:C,onJobUpdated:A,onError:F})})]}),(0,s.jsx)(d.av,{value:"database",className:"space-y-6",children:(0,s.jsx)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,s.jsx)(B,{onSchemaDetected:k,isProcessing:m,setIsProcessing:u,chunkSize:p,onStatusChange:_,onJobCreated:C,onError:F})})}),(0,s.jsx)(d.av,{value:"history",className:"space-y-6",children:(0,s.jsx)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:(0,s.jsx)(H,{})})})]}),t&&"database"===e&&(0,s.jsxs)(y.P.div,{variants:S,className:"bg-card/80 backdrop-blur-sm p-6 rounded-lg border border-border shadow-md",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-foreground mb-4 flex items-center",children:[(0,s.jsx)(R.A,{className:"w-5 h-5 mr-2 text-primary"}),"Detected Schema"]}),(0,s.jsx)(X,{schema:t})]})]})]})})]})]})]})}},7803:(e,a,t)=>{"use strict";t.d(a,{A:()=>h});var s=t(5155),r=t(8173),l=t.n(r),n=t(6046),i=t(9602),d=t(858),o=t(6446),c=t(3950),m=t(1757),u=t(4743),x=t(4857);function h(){let e=(0,n.usePathname)();return(0,s.jsx)("div",{className:"group flex flex-col gap-4 py-2 data-[collapsed=true]:py-2",children:(0,s.jsx)("nav",{className:"grid gap-1 px-2 group-[[data-collapsed=true]]:justify-center group-[[data-collapsed=true]]:px-2",children:(0,s.jsxs)("div",{className:"px-3 py-2",children:[(0,s.jsx)("h2",{className:"mb-2 px-4 text-lg font-semibold tracking-tight",children:"DataPuur Menu"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)(l(),{href:"/datapuur",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground","/datapuur"===e?"bg-accent":"transparent"),children:[(0,s.jsx)(d.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Data Dashboard"})]}),(0,s.jsxs)(l(),{href:"/datapuur/ingestion",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground","/datapuur/ingestion"===e?"bg-accent":"transparent"),children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Ingestion"})]}),(0,s.jsxs)(l(),{href:"/datapuur/profile",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",e.includes("/datapuur/profile")?"bg-accent":"transparent"),children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Profile"})]}),(0,s.jsxs)(l(),{href:"/datapuur/transformation",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",e.includes("/datapuur/transformation")?"bg-accent":"transparent"),children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Transformation"})]}),(0,s.jsxs)(l(),{href:"/datapuur/explore",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground",e.includes("/datapuur/explore")?"bg-accent":"transparent"),children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Explore"})]}),(0,s.jsxs)(l(),{href:"/datapuur/export",className:(0,i.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground","/datapuur/export"===e?"bg-accent":"transparent"),children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Export"})]})]})]})})})}},9286:(e,a,t)=>{"use strict";t.d(a,{E:()=>i});var s=t(5155),r=t(6421),l=t(9602);let n=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{className:(0,l.cn)(n({variant:t}),a),...r})}},2336:(e,a,t)=>{"use strict";t.d(a,{p:()=>n});var s=t(5155),r=t(2115),l=t(9602);let n=r.forwardRef((e,a)=>{let{className:t,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...n})});n.displayName="Input"},5785:(e,a,t)=>{"use strict";t.d(a,{J:()=>o});var s=t(5155),r=t(2115),l=t(6195),n=t(6421),i=t(9602);let d=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.b,{ref:a,className:(0,i.cn)(d(),t),...r})});o.displayName=l.b.displayName},7211:(e,a,t)=>{"use strict";t.d(a,{k:()=>i});var s=t(5155),r=t(2115),l=t(6838),n=t(9602);let i=r.forwardRef((e,a)=>{let{className:t,value:r,...i}=e;return(0,s.jsx)(l.bL,{ref:a,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...i,children:(0,s.jsx)(l.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});i.displayName=l.bL.displayName},745:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>g,gC:()=>p,l6:()=>c,yv:()=>m});var s=t(5155),r=t(2115),l=t(1848),n=t(1719),i=t(1902),d=t(8867),o=t(9602);let c=l.bL;l.YJ;let m=l.WT,u=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(l.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});h.displayName=l.wn.displayName;let p=r.forwardRef((e,a)=>{let{className:t,children:r,position:n="popper",...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,s.jsx)(x,{}),(0,s.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(h,{})]})})});p.displayName=l.UC.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=l.JU.displayName;let g=r.forwardRef((e,a)=>{let{className:t,children:r,...n}=e;return(0,s.jsxs)(l.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]})});g.displayName=l.q7.displayName,r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=l.wv.displayName},1641:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>o,av:()=>c,j7:()=>d,tU:()=>i});var s=t(5155),r=t(2115),l=t(8217),n=t(9602);let i=l.bL,d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});d.displayName=l.B8.displayName;let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});o.displayName=l.l9.displayName;let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(l.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});c.displayName=l.UC.displayName}},e=>{var a=a=>e(e.s=a);e.O(0,[487,565,475,99,991,286,807,786,441,517,358],()=>a(4963)),_N_E=e.O()}]);